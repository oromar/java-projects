<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<!-- 
 Em : 04/07/2015 - 00:57:54
-->

<ui:composition xmlns:ui="http://java.sun.com/jsf/facelets"
	template="./Menu.xhtml" xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:f="http://java.sun.com/jsf/core">

	<ui:define name="Conteudo">

		<h:panelGrid style="margin-left:10px;width:70%">

			<h1>Listagem de Comentario</h1>
			<br />
			<br />

			<h:form id="form_"
				styleClass="form-horizontal">

				<p:growl showDetail="true" autoUpdate="true" globalOnly="true" />

				<h:commandButton type="button" styleClass="btn btn-primary"
					value="Novo" immediate="true">
					<p:ajax event="click"
						oncomplete="dialogCadastroComentario.show();"
						listener="#{comentarioMB.novoListener}" process="@this"
						update=":form_cadastro" />
				</h:commandButton>

				<h:panelGrid style="float:right;" columns="5" id="panel_filter">

					<h:inputText id="input__filter_nome_comentario"
						style="float:right;width:200%;" styleClass="form-control"
						value="#{comentarioMB.filterValue}">
						<f:ajax event="keyup" execute="@this"
							listener="#{comentarioMB.filterDataTable}"
							render="table_" />
					</h:inputText>
					
							&nbsp;&nbsp;
							
						<h:commandButton style="float:right;" styleClass="btn btn-primary"
						type="button"
						onclick="dialog.show();"
						value="Pesquisar" immediate="true" />
						
						&nbsp;&nbsp;
						
					<h:commandButton style="float:right;" styleClass="btn btn-primary"
						type="button" value="Limpar Filtro" immediate="true">
						<p:ajax listener="#{comentarioMB.clearFilterListener}" process="@this"
							update=":form_:table_, :form_busca_" />
					</h:commandButton>

				</h:panelGrid>

				<br />
				<br />

				<h:dataTable id="table_"
					value="#{comentarioMB.listaBeans}"
					styleClass="table table-bordered table-hover"
					var="comentario"
					style="width:100%;cellspacing:10; cellpadding:10;">

					<h:column id="column_id_comentario">
						<f:facet name="header">
							<h:outputLabel value="#" />
						</f:facet>
						<h:outputLabel value="#{comentario.id}" />
					</h:column>

					<h:column id="column_nome_comentario">
						<f:facet name="header">
							<h:outputLabel value="Nome" />
						</f:facet>
						<h:outputLabel value="#{comentario.nome}" />
					</h:column>

					<h:column id="column_versiculo_comentario">
						<f:facet name="header">
							<h:outputLabel value="Versiculo"/>
						</f:facet>
						<h:outputLabel value="#{comentario.versiculo}"/>
					</h:column>

					<h:column id="column_texto_comentario">
						<f:facet name="header">
							<h:outputLabel value="Texto"/>
						</f:facet>
						<h:outputLabel value="#{comentario.texto}"/>
					</h:column>

					<h:column id="column_data_comentario">
						<f:facet name="header">
							<h:outputLabel value="Data"/>
						</f:facet>
						<h:outputLabel value="#{comentario.data}"/>
					</h:column>

					<h:column id="column_autor_comentario">
						<f:facet name="header">
							<h:outputLabel value="Autor"/>
						</f:facet>
						<h:outputLabel value="#{comentario.autor}"/>
					</h:column>



					<h:column>
						<f:facet name="header">
							<h:outputLabel value="Ação" />
						</f:facet>
						<h:commandLink>
							<span class="glyphicon glyphicon-pencil" />
							<p:ajax event="click" listener="#{comentarioMB.updateListener}"
								process="@this" oncomplete="dialogCadastroComentario.show();"
								update=":form_cadastro" />
							<f:attribute name="beanToUpdate"
								value="#{comentario}" />
						</h:commandLink>
						
						&nbsp;&nbsp;
						
						<h:commandLink immediate="true">
							<span class="glyphicon glyphicon-remove" />
							<p:ajax event="click" listener="#{comentarioMB.removeListener}"
								update=":form_" process="@this" />
							<f:attribute name="beanToRemove"
								value="#{comentario}" />
						</h:commandLink>
					</h:column>
				</h:dataTable>
			</h:form>
		</h:panelGrid>

		<p:dialog id="dialog_busca_avancada_"
			styleClass="panel panel-primary"
			widgetVar="dialog" modal="true"
			showEffect="fade" showHeader="true" width="800" hideEffect="fade"
			resizable="false">

			<f:facet name="header">
				<h:outputLabel value="Pesquisa de Comentario" />
			</f:facet>

			<h:form id="form_busca_"
				styleClass="form-horizontal">

				<h:panelGrid styleClass="form-group" style="margin-left:10px;">

					<h:outputLabel value="Nome" />
					<h:inputText value="#{comentarioMB.beanFiltro.nome}"
						styleClass="form-control" size="80" />
						
					<h:outputLabel value="Versiculo" /> 
					<h:inputText id="input_filtro_versiculo_comentario" value="#{comentarioMB.beanFiltro.versiculo}" styleClass="form-control"/>

					<h:outputLabel value="Texto" /> 
					<h:inputText id="input_filtro_texto_comentario" value="#{comentarioMB.beanFiltro.texto}" styleClass="form-control"/>

					<h:outputLabel value="Data" /> 
					<h:inputText id="input_filtro_data_comentario" value="#{comentarioMB.beanFiltro.data}" styleClass="form-control"/>

					<h:outputLabel value="Autor" /> 
					<h:inputText id="input_filtro_autor_comentario" value="#{comentarioMB.beanFiltro.autor}" styleClass="form-control"/>



				</h:panelGrid>
				<br />

				<h:panelGrid columns="4" style="float:right;">

					<h:commandButton styleClass="btn btn-primary" value="Pesquisar">
						<p:ajax event="click" listener="#{comentarioMB.filterDataTable}"
							update="@form, :form_:table_"
							process="@form"
							oncomplete="dialog.hide();" />
					</h:commandButton>

					<br />

					<h:commandButton type="button" styleClass="btn btn-primary"
						value="Cancelar"
						onclick="dialog.hide();" />
				</h:panelGrid>
			</h:form>
		</p:dialog>

		<p:dialog id="dialogCadastroComentario_"
			styleClass="panel panel-default"
			widgetVar="dialogCadastroComentario" modal="true"
			showEffect="fade" showHeader="true" width="800" resizable="false"
			hideEffect="fade">

			<f:facet name="header" widgetVar="dialogCadastroComentario">
				<h:outputLabel value="Cadastro de Comentario" />
			</f:facet>

			<h:form id="form_cadastro" styleClass="form-horizontal">

				<h:panelGrid styleClass="form-group"
					style="width:80%;margin-left:10px;">

					<h:outputLabel value="Nome" />
					<h:inputText id="input_nome_comentario" styleClass="form-control" value="#{comentarioMB.beanSelecionado.nome}" />

					<h:outputLabel value="Versiculo" /> 
					<h:inputText id="input_versiculo_comentario" value="#{comentarioMB.beanSelecionado.versiculo}" styleClass="form-control"/>

					<h:outputLabel value="Texto" /> 
					<h:inputText id="input_texto_comentario" value="#{comentarioMB.beanSelecionado.texto}" styleClass="form-control"/>

					<h:outputLabel value="Data" /> 
					<h:inputText id="input_data_comentario" value="#{comentarioMB.beanSelecionado.data}" styleClass="form-control"/>

					<h:outputLabel value="Autor" /> 
					<h:inputText id="input_autor_comentario" value="#{comentarioMB.beanSelecionado.autor}" styleClass="form-control"/>



				</h:panelGrid>

				<br />

				<h:panelGrid columns="5">

					<h:commandButton styleClass="btn btn-primary" value="Salvar">
						<p:ajax event="click" listener="#{comentarioMB.saveListener}"
							update=":form_, :form_cadastro"
							process="@form" />
						<f:attribute name="beanToSave" value="#{comentarioMB.beanSelecionado}" />
					</h:commandButton>
					
						&nbsp;&nbsp;
						
						<h:commandButton id="btn_limpar" styleClass="btn btn-primary"
						value="Limpar">
						<f:ajax event="click" listener="#{comentarioMB.limparListener}"
							render="@form" execute="@this" immediate="true" />
					</h:commandButton>
					
						&nbsp;&nbsp;
						
							<h:commandButton styleClass="btn btn-primary" value="Cancelar"
						type="button" onclick="dialogCadastroComentario.hide();">
					</h:commandButton>

				</h:panelGrid>
			</h:form>
		</p:dialog>
	</ui:define>
</ui:composition>
